<%= flash[:error] %>
  <%= form_for @expense, url: expense_update_path(@expense.id), method: :put do |f| %>
    <%= label_tag(:name, "Name") %>
    <%= f.text_field :name, placeholder: "Name" %><br>
    <%= label_tag(:description, "Description") %>
    <%= f.text_field :description, placeholder: "Description" %><br>
    <%= label_tag(:amount, "Amount") %>
    <%= f.number_field :amount, placeholder: "Amount" %><br>

    <% @expense.dwelling.users.each do |user| %>
    <% user_expense = user.find_expense(@expense) %>
    <%= user.name %><input class="user_expense_portion" name="user_expense[<%= user_expense ? user_expense.id : "user_id[#{user.id}]" %>][portion]" type="number" value="<%= user_expense ? user_expense.portion : 0 %>">
    <br>
    <% end %>
    Total: <div id="sum-of-portions"><%= @expense.amount %></div>

    <%= f.submit "Update Expense" %>
  <% end %>

